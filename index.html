<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.slim.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js"></script>
  <script type="text/javascript" src="d3.controlPoints.js"></script>
  <style type="text/css">
#container {
    position: relative;
    width: 500px; height: 500px;
}

#container * {
    position: absolute;
}

#controlHandles {
  width: 100%;
  height: 100%;
}

circle.control-point {
    fill: green;
    fill-opacity: 0.25;
}

circle.control-point:hover {
    stroke: yellow;
    stroke-width: 2px;
}
  </style>

  <title>Control points (d3 plugin)</title>

<script type='text/javascript'>//<![CDATA[
// The control points which represent the top-left, top-right and bottom
// right of the image. These will be wires, via d3.js, to the handles
// in the svg element.
var controlPoints = [
    { x: 100, y: 100 },
    { x: 300, y: 100 },
    { x: 300, y: 350 },
    { x: 100, y: 350 },
    { x: 100, y: 200 }
];

var pointsUI;

$(window).on("load", function () {
  pointsUI = d3.controlPointsUI()(d3.select('#controlHandles')
                                  .selectAll('circle')
                                  .data(controlPoints)).radius(10);

  pointsUI.on("changed", function (d) {
    console.log("changed", JSON.stringify(d));
  });
});
//]]>
</script>
</head>

<body>
<div id="container">
    <svg id="controlHandles"></svg>
</div>
</body>

</html>

